var Strossle=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){var n=r(4),o=r(5);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var c=0;c<16;++c)t[i+c]=a[c];return t||o(a)}},function(e,t,r){e.exports=r(6)},function(e,t,r){(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e){"use strict";var r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var p={};function f(){}function d(){}function h(){}var g={};g[i]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==r&&n.call(v,i)&&(g=v);var m=h.prototype=f.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,r){var o;this._invoke=function(i,a){function c(){return new r((function(o,c){!function o(i,a,c,u){var s=l(e[i],e,a);if("throw"!==s.type){var p=s.arg,f=p.value;return f&&"object"===t(f)&&n.call(f,"__await")?r.resolve(f.__await).then((function(e){o("next",e,c,u)}),(function(e){o("throw",e,c,u)})):r.resolve(f).then((function(e){p.value=e,c(p)}),(function(e){return o("throw",e,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}}function S(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=m.constructor=h,h.constructor=d,d.displayName=u(h,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,c,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(b.prototype),b.prototype[a]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(m),u(m,c,"Generator"),m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}}).call(this,r(3)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){"use strict";r.r(t);r(2);var n=function(){return window!==window.parent},o=function(e,t){if(!window.URL)return!0;try{0===e.indexOf("//")&&(e=document.location.protocol+e),0===t.indexOf("//")&&(t=document.location.protocol+t);var r=new window.URL(e),n=new window.URL(t);return r.hostname===n.hostname}catch(e){return!0}},i={checkForAdblocker:function(){var e=document.createElement("div");e.className="afs_ads",e.innerHTML="&nbsp;",document.getElementsByTagName("body")[0].appendChild(e);var t=document.getElementsByClassName("afs_ads"),r=!1;return t.length&&0!==t[0].innerHTML.length&&0!==t[0].clientHeight||(r=!0),e.remove(),r},createElementFromString:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},loadCSS:function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e);var r=document.getElementsByTagName("head");r&&r.length&&r[0].appendChild(t)},loadScript:function(e,t){var r=document.createElement("script");if(r.type="text/javascript",r.src=e,r.async=!0,"string"==typeof t){var n=document.querySelector(t);n.parentNode.insertBefore(r,n.nextSibling)}else{var o=document.getElementsByTagName("head");o&&o.length&&o[0].appendChild(r)}},applyCSSFromStringToSiteHead:function(e){var t=document.createElement("style"),r=document.getElementsByTagName("head")[0],n=e;t.type="text/css",t.appendChild(document.createTextNode(n)),r.appendChild(t)},wrapPostInATag:function(e,t){var r="_top";o(i.getCurrentBrowserUrl(),t)||(r="_blank");var n=document.createElement("a");return n.href=t,n.target=r,n.innerHTML=e.innerHTML,n.rel="nofollow",e.innerHTML="",e.appendChild(n),e},getCurrentBrowserUrl:function(){var e=window.location.href;return n()&&(e=window.document.referrer&&"String"===Object.prototype.toString.call(window.document.referrer).slice(8,-1)?window.document.referrer:window.location.href),e},getCurrentBrowserHostName:function(){var e=window.location.hostname;return n()&&(e=i.getCurrentBrowserUrl().replace(/https?:\/*/,"").split("/")[0].split(":")[0]),e},getCurrentBrowserHostNameWithoutWWW:function(){return i.getCurrentBrowserHostName().replace(/^(www\.)/,"")},getCurrentBrowserDeviceType:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?"mobile":"desktop"},isElementInView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,i=r.top-t<=n&&r.top+r.height>=0,a=r.left<=o&&r.left+r.width>=0,c=i&&a;return c}},a=i,c=!1,u=null,s=window,l={};function p(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var r=t.__tcfapiReturn;r&&"function"==typeof l[r.callId]&&(l[r.callId](r.returnValue,r.success),l[r.callId]=null)}var f=function(){if(!c){if(!u)for(;s;){try{if(s.frames.__tcfapiLocator){u=s;break}}catch(e){}if(s===window.top)break;s=s.parent}window.__tcfapi=function(e,t,r,n){if(u){var o=Math.random()+"",i={__tcfapiCall:{command:e,parameter:n,version:t,callId:o}};l[o]=r,u.postMessage(i,"*")}else r({msg:"CMP not found"},!1)},window.addEventListener("message",p,!1),c=!0}},d={getConsentData:function(){var e={gdprApplies:"",gdprConsent:"",strossleConsents:{}};return new Promise((function(t){try{if(!window.hasOwnProperty("__tcfapi")&&function(){try{return window.self!==window.top}catch(e){return!0}}()&&f(),!window.hasOwnProperty("__tcfapi"))return t(e);var r=!1,n=setTimeout((function(){return r=!0,t(e)}),2e3);window.__tcfapi("getTCData",2,(function(o,i){if(!r){if(clearTimeout(n),i){var a=((o||{}).purpose||{}).consents||{};return(((o||{}).vendor||{}).consents||{})[851]||Object.keys(a).forEach((function(e){return a[e]=!1})),t({gdprApplies:+o.gdprApplies||e.gdprApplies,gdprConsent:o.tcString||e.gdprConsent,strossleConsents:a})}return t(e)}}),[851])}catch(r){return t(e)}}))}};window.StrossleStorage=window.StrossleStorage||{};var h={getItem:function(e){return window.StrossleStorage[e]},setItem:function(e,t){window.StrossleStorage[e]=t}};function g(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){g(i,n,o,a,c,"next",e)}function c(e){g(i,n,o,a,c,"throw",e)}a(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}var b=function(){function e(){v(this,e)}var t,r;return w(e,[{key:"generateWrapperElement",value:function(e,t){var r=a.createElementFromString(e);return document.querySelector(t).appendChild(r),r}},{key:"generatePostElement",value:function(e,t,r,n,o){if("ad"===e.type&&n)try{var i=btoa(encodeURIComponent(e.url));e.url=o+encodeURIComponent(i)+"&b64=1"}catch(t){e.url=o+e.url}return t.replace(new RegExp("{{([^]+?)}}","g"),(function(t,n){return n.split(".").reduce((function(t,n){return t[n]?t[n]:e[n]?e[n]:"ad"===e.view&&"strossle_house_ad"!==e.ad_provider&&r[n]&&"adLabel"===n||"ad"===e.view&&"strossle_house_ad"===e.ad_provider&&r[n]&&"houseAdLabel"===n?r[n].replace(new RegExp("{{([^]+?)}}","g"),(function(t,r){return e[r]?e[r]:""})):"sprinkleit"===e.view&&r[n]&&"acceleratorLabel"===n||"article"===e.type&&r[n]&&"sameSiteArticleLabel"===n&&"sprinkleit"!==e.view?r[n]:""}),{})}))}},{key:"buildWidgetServerURL",value:(r=y(regeneratorRuntime.mark((function e(t,r){var n,o,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getCurrentBrowserUrl(),o=a.getCurrentBrowserDeviceType(),i=h.getItem("strosslePageSessionId"),e.next=5,d.getConsentData();case 5:return r.gdpr=e.sent,c="".concat("//widgets.spklw.com/v1/widgets","/").concat(t)+"?url=".concat(encodeURIComponent(n))+"&device=".concat(o)+"&gdpr=".concat(r.gdpr.gdprApplies)+"&gdpr_consent=".concat(r.gdpr.gdprConsent),i&&(c=c.concat("&page-session-id=".concat(i))),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"getWidgetData",value:(t=y(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((r=e.sent).ok){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"isDeviceStorageAllowed",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=!(!t||!t.gdpr||!1!==t.gdpr.gdprApplies&&"false"!==t.gdpr.gdprApplies&&0!==t.gdpr.gdprApplies&&"0"!==t.gdpr.gdprApplies)||!!(t&&t.gdpr.strossleConsents&&t.gdpr.strossleConsents[1]),!t||!1!==t.deviceStorage&&"false"!==t.deviceStorage&&0!==t.deviceStorage&&"0"!==t.deviceStorage?!t||!0!==t.deviceStorage&&"true"!==t.deviceStorage&&1!==t.deviceStorage&&"1"!==t.deviceStorage||(e=!0):e=!1,e}},{key:"loadPlugins",value:function(e){for(var t=0;t<e.length;t++)"css"===e[t].type&&a.loadCSS(e[t].link),"script"===e[t].type&&a.loadScript(e[t].link)}},{key:"appendWidgetHeader",value:function(e,t,r){var n=e.replace(new RegExp("{{headerText}}","g"),t||""),o=a.createElementFromString(n);r.prepend(o)}},{key:"appendWidgetFooter",value:function(e,t){var r=a.createElementFromString(e);t.appendChild(r)}},{key:"appendPostsEnd",value:function(e,t){var r=a.createElementFromString('<div id="strossle-posts-end-'.concat(e,'" style="flex: 0 0 100%; max-width: 100%;"></div>'));t.appendChild(r)}}]),e}(),S=function(){function e(t){v(this,e),this.instanceId=e.generateInstanceId(),this.targetSelector=t,this.privateMethods=new b,this.adBlockerInUse=a.checkForAdblocker(),this.adBlockRedirectUrl="//widgets.sprinklecontent.com/r/?u="}return w(e,null,[{key:"generateInstanceId",value:function(){return Math.random().toString(36).substr(2,9)}}]),e}(),k=function(e,t){var r=setInterval((function(){a.isElementInView(e)&&(clearInterval(r),t())}),100)},x=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")},E={buildAndSendLoadEvent:function(e){var t=(h.getItem("strosslePageSessionId")||"").replace(/\-/g,""),r={widget_id:e,device:a.getCurrentBrowserDeviceType(),session_id:t,url:a.getCurrentBrowserUrl(),origin_type:"widget",event:"load",type:"widget"},n=encodeURIComponent(x(r)),o="".concat("https://bonfire.spklw.com","/?t=bulk&i=").concat(n);fetch(o)},preparePostClickEvent:function(e,t,r){e.addEventListener("click",(function(){if(!e.getAttribute("data-clicked")){e.setAttribute("data-clicked",!0),fetch(t);try{r&&Array.isArray(r)&&(r=r.concat(r.filter(Boolean)))&&r.length>0&&r.forEach((function(t){var r=document.createElement("img");r.src=t,r.style.visibility="hidden",e.appendChild(r),r.remove()}))}catch(e){}}}))},prepareWidgetWrapperInViewEvent:function(e,t){k(e,(function(){fetch(t)}))},preparePostInViewEvent:function(e,t,r,n){var o=[];if(r&&Array.isArray(r)&&(o=o.concat(r.filter(Boolean))),o&&Array.isArray(o))try{e.setAttribute("data-third-party-link",JSON.stringify(o))}catch(e){}k(e,(function(){fetch(t),o&&o.length>0&&o.forEach((function(t){var r=document.createElement("img");r.src=t,r.style.visibility="hidden",e.appendChild(r),r.remove()})),n&&Array.isArray(n)&&n.length>0&&n.filter(Boolean).forEach((function(t){var r=document.createElement("script");r.src=t,r.type="application/javascript",e.appendChild(r)}))}))}};function O(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.src,n=t.global;this.src=r,this.global=n,this.isLoaded=!1}var t,r,n;return t=e,(r=[{key:"loadScript",value:function(){var e=this;return new Promise((function(t,r){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e.src;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),n.addEventListener("load",(function(){e.isLoaded=!0,t(n)})),n.addEventListener("error",(function(){r(new Error("".concat(e.src," failed to load.")))}))}))}},{key:"load",value:function(){var e=this;return new Promise(function(){var t,r=(t=regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isLoaded){t.next=12;break}return t.prev=1,t.next=4,e.loadScript();case 4:r(window[e.global]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),n(t.t0);case 10:t.next=13;break;case 12:r(window[e.global]);case 13:case"end":return t.stop()}}),t,null,[[1,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){O(i,n,o,a,c,"next",e)}function c(e){O(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}())}}])&&P(t.prototype,r),n&&P(t,n),e}(),R={debug:function(){}};function C(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function W(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){B(i,n,o,a,c,"next",e)}function c(e){B(i,n,o,a,c,"throw",e)}a(void 0)}))}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return F(this,r)}}function F(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(g,e);var t,r,n,o,i,c,u,s,l,p,f,d=M(g);function g(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return N(this,g),(r=d.call(this,t)).id=e,r.opts=n,r.events=[],r.eventListeners=[],r.plugins=r.opts.plugins&&Array.isArray(r.opts.plugins)?r.opts.plugins:[],r}return t=g,(r=[{key:"pluginEventListener",value:(f=W(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.debug("Plugin event received: %s %o",t,r),e.t0=t,e.next="loadContent"===e.t0?4:9;break;case 4:return e.next=6,this.fetchData();case 6:return(n=e.sent)&&n.content&&this.renderPosts(n.content),e.abrupt("return");case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"lifecycleHook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(R.debug("Lifecycle hook: %s %o",e,t),this.events.push({name:e,data:t,timestamp:(new Date).toISOString()}),Array.isArray(this.eventListeners)){var r=I(I({},this.getPluginContext()),{},{event:{name:e,data:t}});this.eventListeners.forEach((function(t){"function"==typeof t[e]&&t[e].call(t,r)}))}}},{key:"getPluginContext",value:function(){return{emit:this.pluginEventListener.bind(this),widgetInstanceId:this.instanceId,widgetSelector:this.targetSelector,widgetId:this.id}}},{key:"registerPlugin",value:(p=W(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=W(regeneratorRuntime.mark((function e(n){var o,i,a,c,u,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.link||null===(o=t.type)||void 0===o||!o.startsWith("script:")){e.next=15;break}if(c=null===(a=t.type)||void 0===a?void 0:a.slice("script:".length),window[c]&&"function"!=typeof window[c]){e.next=13;break}return e.prev=3,u=new A({src:t.link,global:c}),e.next=7,u.load();case 7:i=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return");case 13:e.next=16;break;case 15:i=function(){return I({},t)};case 16:return s=I({options:t.options},r.getPluginContext()),r.lifecycleHook("pluginWillLoad",{plugin:t}),l=i.call(i,s),r.eventListeners.push(l),r.lifecycleHook("pluginDidLoad",{plugin:t}),e.abrupt("return",n());case 22:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:"loadPluginsAndWait",value:(l=W(regeneratorRuntime.mark((function e(t){var r,n=this,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:2e3,e.abrupt("return",new Promise((function(e){var o=setTimeout((function(){return R.debug("Load plugins took too long"),e()}),r),i=t.map(n.registerPlugin.bind(n));return Promise.allSettled(i).then((function(){return clearTimeout(o),e()}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"initialize",value:(s=W(regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.prev=1,this.privateMethods.loadPlugins(this.plugins.filter((function(e){return e.link&&["css","script"].includes(e.type)}))),e.next=5,this.loadPluginsAndWait(this.plugins);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(!this.id){e.next=19;break}return e.prev=10,e.next=13,this.fetchData();case 13:t=e.sent,e.next=19;break;case 16:e.prev=16,e.t1=e.catch(10);case 19:if(t||this.opts.content){e.next=21;break}return e.abrupt("return");case 21:if(r=t&&t.widget&&t.widget.settings?JSON.parse(t.widget.settings):{},this.opts.design&&"object"===j(this.opts.design)&&(r.designSettings=Object.assign({},r.designSettings,this.opts.design)),n=t&&t.content?t.content:{posts:[]},this.opts&&this.opts.content&&this.opts.content.posts&&Array.isArray(this.opts.content.posts)&&(n.posts=this.opts.content.posts),this.widgetSettings=r,!r.plugins||!r.plugins.length){e.next=38;break}if(this.privateMethods.loadPlugins(r.plugins.filter((function(e){return e.link&&["css","script"].includes(e.type)}))),e.prev=28,o=r.plugins.filter((function(e){var t;return e.link&&(null==e||null===(t=e.type)||void 0===t?void 0:t.startsWith("script:"))})),!Array.isArray(o)||!o.length){e.next=33;break}return e.next=33,this.loadPluginsAndWait(o);case 33:e.next=37;break;case 35:e.prev=35,e.t2=e.catch(28);case 37:this.plugins=[].concat(C(this.plugins),C(r.plugins));case 38:if(a.applyCSSFromStringToSiteHead(r.designSettings.widgetCSS),this.lifecycleHook("widgetWillRender"),!t||!t.html){e.next=45;break}return e.next=43,this.renderHtml(r,n,t.html);case 43:e.next=47;break;case 45:return e.next=47,this.renderRegular(r,n);case 47:e.next=52;break;case 49:e.prev=49,e.t3=e.catch(0);case 52:case"end":return e.stop()}}),e,this,[[0,49],[1,7],[10,16],[28,35]])}))),function(){return s.apply(this,arguments)})},{key:"fetchData",value:(u=W(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.privateMethods.buildWidgetServerURL(this.id,this.opts);case 4:return t=e.sent,e.next=7,this.privateMethods.getWidgetData(t);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"renderHtml",value:(c=W(regeneratorRuntime.mark((function e(t,r,n){var o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o=a.createElementFromString(n),document.querySelector(this.targetSelector).appendChild(o),E.prepareWidgetWrapperInViewEvent(o,r.t_imp),o.querySelectorAll(".strossle-post").forEach((function(e){var t=e.getAttribute("data-id"),r=e.getAttribute("data-type"),n=e.getAttribute("data-link");if("ad"===r&&i.adBlockerInUse)try{var o=btoa(encodeURIComponent(n));n=i.adBlockRedirectUrl+encodeURIComponent(o)+"&b64=1"}catch(e){n=i.adBlockRedirectUrl+n}var c=JSON.parse(e.getAttribute("data-third-party-link")),u=e.getAttribute("data-track-impression"),s=JSON.parse(e.getAttribute("data-click-pixels")),l=e.getAttribute("data-track-click");E.preparePostClickEvent(e,l,s),E.preparePostInViewEvent(e,u,c),a.wrapPostInATag(e,n),"ad"===e.getAttribute("data-type")&&"overlay"===e.getAttribute("data-ad-type")&&i.setupOverlay(t,n,e)})),r.posts.length<1&&this.opts&&this.opts.passbackUrl&&"string"==typeof this.opts.passbackUrl&&a.loadScript(this.opts.passbackUrl,this.targetSelector)}catch(e){}case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return c.apply(this,arguments)})},{key:"renderRegular",value:(i=W(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.privateMethods.generateWrapperElement(t.designSettings.widgetWrapperTemplate,this.targetSelector),E.prepareWidgetWrapperInViewEvent(n,r.t_imp),r.posts.length&&(t.designSettings.widgetHeaderTemplate&&this.privateMethods.appendWidgetHeader(t.designSettings.widgetHeaderTemplate,t.designSettings.widgetHeaderText,n),this.privateMethods.appendPostsEnd(this.instanceId,n),t.designSettings.widgetFooterTemplate&&this.privateMethods.appendWidgetFooter(t.designSettings.widgetFooterTemplate,n)),e.next=6,this.renderPosts(r);case 6:this.lifecycleHook("widgetDidRender"),r.posts.length<1&&this.opts&&this.opts.passbackUrl&&"string"==typeof this.opts.passbackUrl&&a.loadScript(this.opts.passbackUrl,this.targetSelector),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e,t){return i.apply(this,arguments)})},{key:"renderPosts",value:(o=W(regeneratorRuntime.mark((function e(t){var r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.widgetSettings,t.posts.forEach((function(e){n.lifecycleHook("contentWillRender",{content:JSON.parse(JSON.stringify(e))});var t=a.createElementFromString(n.privateMethods.generatePostElement(e,r.designSettings.widgetPostTemplate,r.designSettings.contentLabels,n.adBlockerInUse,n.adBlockRedirectUrl)),o=a.wrapPostInATag(t,e.url),i=document.getElementById("strossle-posts-end-".concat(n.instanceId));i.parentNode.insertBefore(o,i),E.preparePostClickEvent(o,e.t_click,e.click_pixels),E.preparePostInViewEvent(o,e.t_imp,e.impression_pixels,e.impression_scripts),o.addEventListener("click",(function(){n.lifecycleHook("onContentClick",{content:JSON.parse(JSON.stringify(e))})})),"ad"===e.type&&"overlay"===e.ad_type&&n.setupOverlay(e.id,e.url,t),n.lifecycleHook("contentDidRender",{content:JSON.parse(JSON.stringify(e))})}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setupOverlay",value:function(e,t,r){var n={id:e,url:t};r.firstChild.removeAttribute("target");var o="//assets.strossle.com/".concat(this.id,"/plugins/overlay.js"),i=document.getElementsByTagName("body");i&&i.length&&i[0].addEventListener("strossleOverlay",(function(e){return e.detail.loadOverlay(n,r)})),h.getItem("overlayPluginLoaded")||(h.setItem("overlayPluginLoaded",!0),a.loadScript(o))}}])&&U(t.prototype,r),n&&U(t,n),g}(S);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Y(e);if(t){var o=Y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $(this,r)}}function $(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(c,e);var t,r,n,o,i,a=Q(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.call(this,null,e.widgetTargetSelector,{content:e.widgetContent,plugins:e.plugins,design:{widgetHeaderTemplate:e.widgetHeaderTemplate,widgetHeaderText:e.widgetHeaderText,widgetWrapperTemplate:e.widgetWrapperTemplate,widgetPostTemplate:e.widgetPostTemplate,widgetFooterTemplate:e.widgetFooterTemplate,widgetCSS:e.widgetCSS,contentLabels:e.contentLabels}})}return t=c,(r=[{key:"render",value:(o=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.initialize();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){q(i,r,n,a,c,"next",e)}function c(e){q(i,r,n,a,c,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})}])&&G(t.prototype,r),n&&G(t,n),c}(V);function X(e,t,r){return(X=Z()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&ee(o,r.prototype),o}).apply(null,arguments)}function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oe={requeue:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];setTimeout((function(){ie.Queue.apply(ie,t)}),200)},initializeAndRenderWidgetWhenNearView:function(e,t,r,n){var o=document.querySelector(t);if(!o)return oe.requeue.apply(oe,re(r));e&&E.buildAndSendLoadEvent(e);var i=setInterval((function(){a.isElementInView(o,400)&&(n(),clearInterval(i))}),100)}},ie={Queue:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];1===t.length&&1===t.filter((function(e){return e&&"object"===te(e)})).length?oe.initializeAndRenderWidgetWhenNearView(null,t[0].widgetTargetSelector,t,(function(){return X(K,t).render()})):t.length>1&&2===t.filter((function(e){return e&&"string"==typeof e})).length&&oe.initializeAndRenderWidgetWhenNearView(t[0],t[1],t,(function(){return X(V,t).initialize()}))}},ae=ie,ce=r(0),ue=r.n(ce);function se(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pe="strossle";!function(e){if(!e.Strossle){h.setItem("strosslePageSessionId",ue()()),e[pe]||(e[pe]=e[pe]||function(){([pe].q=[pe].q||[]).push(arguments)});for(var t=e[pe].q||[];t.length;){var r=t.shift();ae.Queue.apply(ae,se(r))}e[pe]=ae.Queue}}(window)}]);